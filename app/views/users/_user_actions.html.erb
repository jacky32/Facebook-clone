<%= turbo_frame_tag "user-actions", class: "buttons" do %>
  <% if user == current_user %>
    <div id="user-actions-edit-info" data-action="click->user#editProfile" class="button">Edit profile</div>
  <% else %>
    <div id="user-actions-send-message" data-user="<%= user.id %>" data-action="click->user#sendMessage" class="button">Send message</div>
    <% if current_user.friends_with?(user: user) %>
      <%= button_to "Remove friend", friendship_path(user_id: current_user.id, friend_id: user.id), method: :delete, class:"button delete", data: { user: user.id, action: "click->user#removeFriend"}%>
    <% elsif current_user.friend_request_sent?(user_id: user) %>
      <% friendship_id = Friendship.find_by_ids(user.id, current_user.id) %>
      <%= button_to "Unsend friend request", friendship_path(friendship_id, user_id: current_user.id, friend_id: user.id), method: :delete, class:"button delete"%>
    <% elsif current_user.friend_request_received?(user_id: user) %>
      <% friendship_id = Friendship.find_by_ids(user.id, current_user.id) %>
      <%= button_to "Accept friend request", friendship_path(friendship_id, friend_id: user.id ), method: :patch, class:"button"%>
    <% else %>
      <%= button_to "Add friend", friendships_path(user_id: current_user.id, friend_id: user.id), class:"button"%>
    <% end %>
  <% end %>
<% end %>